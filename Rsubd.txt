<html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;"><div>ПРИМЕР .</div><div>DECLARE</div><div>ARG1 LECTURER. LECTURER_ID%TYPE, -- ПЕРЕМЕННАЯ ТИПА АТРИБУТА --LECTURER_ID ТАБЛИЦЫ LECTURER</div><div>ARG2 LECTURER.SURNAME%TYPE, - ПЕРЕМЕННАЯ ТИПА АТРИБУТА --SURNAME ТАБЛИЦЫ LECTURER</div><div>ARG3 LECTURER.NAME%TYPE , -- ПЕРЕМЕННАЯ ТИПА АТРИБУТА -- NAME ТАБЛИЦЫ LECTURER</div><div>ARG4 LECTURER.CITY%TYPE , --ПЕРЕМЕННАЯ ТИПА АТРИБУТА -- CITY ТАБЛИЦЫ LECTURER</div><div>ARG5 LECTURER.UNIV_ID%TYPE); -- ПЕРЕМЕННАЯ ТИПА АТРИБУТА --UNIV_ID ТАБЛИЦЫ LECTURER</div><div>CURSOR CUR1 IS SELECT * FROM LECTURER; --ОПРЕДЕЛЕНИЕ -- КУРСОРА</div><div>SPECIAL_CASE EXCEPTION; -- ПОЛЬЗОВАТЕЛЬСКАЯ -- ИСКЛЮЧИТЕЛЬНАЯ СИТУАЦИЯ</div><div>BEGIN</div><div>OPEN(CUR1);</div><div>FETCH CUR1 INTO ARG1, ARG2, ARG3, ARG4, ARG5; WHILE CUR1%FOUND LOOP</div><div>DBMS_OUTPUT.PUT_LINE(CUR1%ROWCOUNT II' 'IIARG1|| ‘ ‘||ARG2 II' 'IIARG3 II' 'IIARG4||’ ‘||ARG5);</div><div>IF ARGL &gt; 20</div><div>THEN RAISE SPECIAL_CASE;</div><div>FETCH CUR1 INTO ARG1, ARG2, ARG3, ARG4, ARG5; END LOOP;</div><div>EXCEPTION</div><div>WHEN SPECIAL_CASE THEN</div><div>DBMS_OUTPUT.PUT_LINE(' ПОЛЬЗОВАТЕЛЬСКАЯ ’, ‘ ИСКЛЮЧИТЕЛЬНАЯ СИТУАЦИЯ ' ) ;</div><div>WHEN OTHERS THEN</div><div>DBMS_OUTPUT.PUT_LINE(' ОШИБКА ПРИЛОЖЕ’,</div><div>88</div><div><br></div><div>‘ НИЯ. HEДИАГНОСТИРОВАННАЯ ОШИБКА ' ) ;</div><div>END; /</div><div><br></div><div>Задание 1</div><div>1. Сделать выборку из таблицы STUDENT с использованием курсора и цикла с методом %FOUND или %NOTFOUND для получения данных о студентах, живущих в Москве с использованием пользовательской ис- ключительной ситуации.</div><div><br></div><div><br></div><div>Решение</div><div><br></div><div><div>Для выполнения выборки из таблицы `STUDENT`, где студенты живут в Москве, и обработки исключительных ситуаций с использованием курсора и пользовательской исключительной ситуации, можно использовать следующий PL/SQL код:</div><div><br></div><div>```plsql</div><div>DECLARE</div><div>&nbsp; -- Переменные для хранения данных студента</div><div>&nbsp; ARG1 STUDENT.STUDENT_ID%TYPE;</div><div>&nbsp; ARG2 STUDENT.SURNAME%TYPE;</div><div>&nbsp; ARG3 STUDENT.NAME%TYPE;</div><div>&nbsp; ARG4 STUDENT.CITY%TYPE;</div><div>&nbsp; ARG5 STUDENT.UNIV_ID%TYPE;</div><div><br></div><div>&nbsp; -- Определение курсора</div><div>&nbsp; CURSOR CUR1 IS</div><div>&nbsp; &nbsp; SELECT STUDENT_ID, SURNAME, NAME, CITY, UNIV_ID</div><div>&nbsp; &nbsp; FROM STUDENT</div><div>&nbsp; &nbsp; WHERE CITY = 'Москва';</div><div><br></div><div>&nbsp; -- Пользовательская исключительная ситуация</div><div>&nbsp; SPECIAL_CASE EXCEPTION;</div><div>BEGIN</div><div>&nbsp; OPEN CUR1;</div><div>&nbsp; FETCH CUR1 INTO ARG1, ARG2, ARG3, ARG4, ARG5;</div><div><br></div><div>&nbsp; WHILE CUR1%FOUND LOOP</div><div>&nbsp; &nbsp; DBMS_OUTPUT.PUT_LINE(ARG1 || ' ' || ARG2 || ' ' || ARG3 || ' ' || ARG4 || ' ' || ARG5);</div><div><br></div><div>&nbsp; &nbsp; -- Проверка условия для пользовательской исключительной ситуации</div><div>&nbsp; &nbsp; IF ARG1 IS NULL THEN</div><div>&nbsp; &nbsp; &nbsp; RAISE SPECIAL_CASE;</div><div>&nbsp; &nbsp; END IF;</div><div><br></div><div>&nbsp; &nbsp; FETCH CUR1 INTO ARG1, ARG2, ARG3, ARG4, ARG5;</div><div>&nbsp; END LOOP;</div><div><br></div><div>&nbsp; CLOSE CUR1;</div><div>EXCEPTION</div><div>&nbsp; WHEN SPECIAL_CASE THEN</div><div>&nbsp; &nbsp; DBMS_OUTPUT.PUT_LINE('ПОЛЬЗОВАТЕЛЬСКАЯ ИСКЛЮЧИТЕЛЬНАЯ СИТУАЦИЯ');</div><div>&nbsp; WHEN OTHERS THEN</div><div>&nbsp; &nbsp; DBMS_OUTPUT.PUT_LINE('ОШИБКА ПРИЛОЖЕНИЯ. НЕИДЕНТИФИЦИРОВАННАЯ ОШИБКА');</div><div>END;</div><div>/</div><div>```</div><div><br></div><div>В этом примере курсор `CUR1` выбирает студентов из таблицы `STUDENT`, живущих в Москве. Внутри цикла `WHILE` данные выводятся с помощью `DBMS_OUTPUT.PUT_LINE`. Если условие для пользовательской исключительной ситуации выполняется (в данном случае если `ARG1` равен `NULL`), вызывается `SPECIAL_CASE`. При возникновении любой другой ошибки выводится сообщение о неидентифицированной ошибке.</div></div></body></html>